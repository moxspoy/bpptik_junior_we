<!-- Author
    * M NURILMAN BAEHAQI
    * Training and Certification for Junior Web Programming (JWP) by BPPTIK Kominfo
    * 23 April 2019, Room 112 at Main Building
-->

<!DOCTYPE html>
<html>

<head>
    <title>Junior Web - Loop Until 999 - Universitas Moxspoy</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <div class="container">

        <div class="heading" style="margin-top:100px">
            <h1>Program Penjumlahan Sampai 999</h1>
        </div>

        <div id="input_element">
        </div>

        <button class="btn btn-primary" onclick=hitungNilai()>Hitung</button>
        <button class="btn btn-primary" onclick=tambahBaris()>Tambah</button>


        <div class="heading" style="margin-top:100px">
            <h1 id="result"></h1>
        </div>

    </div>

    <script>
        let MAX_ELEMENT = 3;
        let data = new Array();

        //create element with loop
        initialTambahBaris();

        function initialTambahBaris() {
            //create element with loop
            let element = "";
            for (let i = 0; i < MAX_ELEMENT; i++) {
                element = element + "<div class='form-group'>";
                element = element +
                    "<label for='inputX'>Nilai ke - " + i + "</label>";
                element = element +
                    "<input type='number' class='form-control' id='input" + i +
                    "' required placeholder='Masukan nilai ke - " +
                    i + "'>";
                element = element + "</div>";
            }
            document.getElementById("input_element").innerHTML = element;
        }

        function tambahBaris() {

            //create element with loop
            getElement();
            let element = "";
            MAX_ELEMENT++;
            data.sort();
            for (let i = 0; i < MAX_ELEMENT - 1; i++) {
                element = element + "<div class='form-group'>";
                element = element +
                    "<label for='inputX'>Nilai ke - " + i + "</label>";
                element = element +
                    "<input type='number' class='form-control' id='input" + i +
                    "' value='" + data[i] + "' required placeholder='Masukan nilai ke - " +
                    i + "'>";
                element = element + "</div>";
            }

            //append with last row
            let last_size = MAX_ELEMENT - 1;
            element = element + "<div class='form-group'>";
            element = element +
                "<label for='inputX'>Nilai ke - " + last_size + "</label>";
            element = element +
                "<input type='number' class='form-control' id='input" + last_size +
                "' required placeholder='Masukan nilai ke - " +
                last_size + "'>";
            element = element + "</div>";

            document.getElementById("input_element").innerHTML = element;
        }

        function hitungNilai() {

            getElement();

            //now we have a data, calculate till find 999
            let sum = 0;
            let isThere999 = false;
            let i = 0;

            while (i < MAX_ELEMENT && !isThere999) {
                if (data[i] == 999) {
                    isThere999 = true;
                    break;
                }
                sum += Number(data[i]);
                i++;
            }

            //print all element to html
            let jumlah = document.getElementById('result');
            jumlah.innerHTML = sum;
        }

        function getElement() {
            //initialize all element from input html and push to array using Loop
            data = new Array();
            for (let i = 0; i < MAX_ELEMENT; i++) {
                let init_element = "document.getElementById('input" + (i) + "').value";
                let val = eval(init_element);
                let val_number = Number(val);
                data.push(val_number);
            }
        }
    </script>

</body>

</html>